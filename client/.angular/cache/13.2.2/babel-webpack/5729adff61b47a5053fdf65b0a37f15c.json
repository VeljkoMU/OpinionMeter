{"ast":null,"code":"import { take } from 'rxjs';\nimport { getMostEngagedWithPostsAction, getPostsByTagAction } from 'src/store/actions';\nimport { selectCurrentPageNum, selectLoadedPosts, selectMostEngagedWithPosts, selectUserData } from 'src/store/selectors';\nimport { faSignInAlt } from '@fortawesome/free-solid-svg-icons';\nimport { faGripLines } from '@fortawesome/free-solid-svg-icons';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"src/app/services/ui.service\";\nimport * as i3 from \"src/app/services/user-data-manager.service\";\nimport * as i4 from \"@fortawesome/angular-fontawesome\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../add-post-form/add-post-form.component\";\nimport * as i7 from \"../posts-carousel/posts-carousel.component\";\nimport * as i8 from \"../../page-controls/page-controls.component\";\nimport * as i9 from \"../post/post.component\";\n\nfunction MainPageComponent_app_posts_carousel_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-posts-carousel\", 16);\n    i0.ɵɵlistener(\"seeMoreEvent\", function MainPageComponent_app_posts_carousel_29_Template_app_posts_carousel_seeMoreEvent_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.getMostEngagingPosts();\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"isUserSignedIn\", ctx_r0.username != \"\")(\"showIcons\", !ctx_r0.addPostDialogVisible);\n  }\n}\n\nfunction MainPageComponent_button_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function MainPageComponent_button_30_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.setAddPostDialogVisibility(true);\n    });\n    i0.ɵɵtext(1, \" Create a post \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MainPageComponent_app_post_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-post\", 18);\n  }\n\n  if (rf & 2) {\n    const p_r7 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"isUserSignedIn\", ctx_r2.username != \"\")(\"post\", p_r7)(\"userControlMode\", false)(\"showIcons\", !ctx_r2.addPostDialogVisible);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"show\": a0\n  };\n};\n\nconst _c1 = function (a0) {\n  return {\n    \"menu-selected\": a0\n  };\n};\n\nexport let MainPageComponent = /*#__PURE__*/(() => {\n  class MainPageComponent {\n    constructor(store, uiService, userData) {\n      this.store = store;\n      this.uiService = uiService;\n      this.userData = userData;\n      this.personBooth = faSignInAlt;\n      this.hamburgerIcon = faGripLines;\n      this.posts = [];\n      this.addPostDialogVisible = false;\n      this.username = \"\";\n      this.currentPage = 1;\n      this.currentTag = \"general\";\n      this.accountNavigationString = \"Login / Register\";\n      this.backgroundImageUri = \"\";\n      this.isMenuOpen = false;\n    }\n\n    ngOnInit() {\n      this.store.select(selectCurrentPageNum).subscribe(pagingData => {\n        this.currentPage = pagingData.currentPage;\n      });\n      this.store.select(selectLoadedPosts).subscribe(posts => {\n        this.posts = posts;\n        this.changeBackground(this.currentTag);\n      });\n      this.store.select(selectUserData).subscribe(userData => {\n        var _a;\n\n        this.username = (_a = userData === null || userData === void 0 ? void 0 : userData.username) !== null && _a !== void 0 ? _a : \"\";\n\n        if (this.username != \"\") {\n          this.accountNavigationString = \"My Account\";\n        } else {\n          this.userData.confirmCradentials();\n        }\n      });\n      this.store.dispatch(getPostsByTagAction({\n        tag: \"general\",\n        pageNum: 1\n      }));\n\n      if (this.username == undefined) {\n        this.userData.confirmCradentials();\n      }\n    }\n\n    toggleMenu() {\n      this.isMenuOpen = !this.isMenuOpen;\n    }\n\n    changeBackground(selectedTag) {\n      this.backgroundImageUri = \"assets/\" + selectedTag + \".jpg\";\n\n      if (this.currentTag == \"\") {\n        this.backgroundImageUri = \"assets/general.jpg\";\n      }\n    }\n\n    getByTag(tag) {\n      this.currentTag = tag;\n      this.store.dispatch(getPostsByTagAction({\n        tag,\n        pageNum: 1\n      }));\n    }\n\n    getMostEngagingPosts() {\n      this.currentTag = \"\";\n      this.store.dispatch(getMostEngagedWithPostsAction());\n      this.store.select(selectMostEngagedWithPosts).pipe(take(1)).subscribe(data => {\n        this.posts = data;\n      });\n    }\n\n    myposts() {\n      if (this.userData.username != \"\") this.uiService.gotoUser();else this.uiService.gotoLogin();\n    }\n\n    setAddPostDialogVisibility(isVisible) {\n      this.addPostDialogVisible = isVisible;\n    }\n\n  }\n\n  MainPageComponent.ɵfac = function MainPageComponent_Factory(t) {\n    return new (t || MainPageComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.UIService), i0.ɵɵdirectiveInject(i3.UserDataManagerService));\n  };\n\n  MainPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MainPageComponent,\n    selectors: [[\"app-main-page\"]],\n    decls: 36,\n    vars: 32,\n    consts: [[1, \"container\"], [1, \"upper\"], [1, \"logo-div\"], [\"src\", \"../../../assets/logo.png\", 1, \"logo-img\"], [1, \"account-button\", 3, \"click\"], [3, \"icon\"], [1, \"bottom\", \"nav-toggle\", 3, \"click\"], [1, \"bottom\", \"menu-bar\", 3, \"ngClass\"], [1, \"menu\", 3, \"ngClass\", \"click\"], [3, \"visible\", \"closeDialogEvent\"], [3, \"isUserSignedIn\", \"showIcons\", \"seeMoreEvent\", 4, \"ngIf\"], [\"class\", \"dialogOpenButton button\", 3, \"click\", 4, \"ngIf\"], [1, \"post-list\"], [3, \"isUserSignedIn\", \"post\", \"userControlMode\", \"showIcons\", 4, \"ngFor\", \"ngForOf\"], [1, \"background-image\", 3, \"src\"], [1, \"background-overlay\"], [3, \"isUserSignedIn\", \"showIcons\", \"seeMoreEvent\"], [1, \"dialogOpenButton\", \"button\", 3, \"click\"], [3, \"isUserSignedIn\", \"post\", \"userControlMode\", \"showIcons\"]],\n    template: function MainPageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"header\");\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelement(4, \"img\", 3);\n        i0.ɵɵelementStart(5, \"h1\");\n        i0.ɵɵtext(6, \"Opinion-Meter\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function MainPageComponent_Template_button_click_7_listener() {\n          return ctx.myposts();\n        });\n        i0.ɵɵelement(8, \"fa-icon\", 5);\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 6);\n        i0.ɵɵlistener(\"click\", function MainPageComponent_Template_div_click_10_listener() {\n          return ctx.toggleMenu();\n        });\n        i0.ɵɵtext(11, \" Menu \");\n        i0.ɵɵelement(12, \"fa-icon\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 7);\n        i0.ɵɵelementStart(14, \"div\", 8);\n        i0.ɵɵlistener(\"click\", function MainPageComponent_Template_div_click_14_listener() {\n          return ctx.getByTag(\"general\");\n        });\n        i0.ɵɵtext(15, \"GENERAL\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 8);\n        i0.ɵɵlistener(\"click\", function MainPageComponent_Template_div_click_16_listener() {\n          return ctx.getByTag(\"politics\");\n        });\n        i0.ɵɵtext(17, \"POLITICS\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 8);\n        i0.ɵɵlistener(\"click\", function MainPageComponent_Template_div_click_18_listener() {\n          return ctx.getByTag(\"hobbies\");\n        });\n        i0.ɵɵtext(19, \"HOBBIES\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 8);\n        i0.ɵɵlistener(\"click\", function MainPageComponent_Template_div_click_20_listener() {\n          return ctx.getByTag(\"philosphy\");\n        });\n        i0.ɵɵtext(21, \"PHILOSPHY\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 8);\n        i0.ɵɵlistener(\"click\", function MainPageComponent_Template_div_click_22_listener() {\n          return ctx.getByTag(\"personal\");\n        });\n        i0.ɵɵtext(23, \"PERSONAL\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\", 8);\n        i0.ɵɵlistener(\"click\", function MainPageComponent_Template_div_click_24_listener() {\n          return ctx.getByTag(\"current_events\");\n        });\n        i0.ɵɵtext(25, \"CURRENT EVENTS\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 8);\n        i0.ɵɵlistener(\"click\", function MainPageComponent_Template_div_click_26_listener() {\n          return ctx.getMostEngagingPosts();\n        });\n        i0.ɵɵtext(27, \"MOST ENGAIGING\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"app-add-post-form\", 9);\n        i0.ɵɵlistener(\"closeDialogEvent\", function MainPageComponent_Template_app_add_post_form_closeDialogEvent_28_listener() {\n          return ctx.setAddPostDialogVisibility(false);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(29, MainPageComponent_app_posts_carousel_29_Template, 1, 2, \"app-posts-carousel\", 10);\n        i0.ɵɵtemplate(30, MainPageComponent_button_30_Template, 2, 0, \"button\", 11);\n        i0.ɵɵelementStart(31, \"div\", 12);\n        i0.ɵɵelement(32, \"app-page-controls\");\n        i0.ɵɵtemplate(33, MainPageComponent_app_post_33_Template, 1, 4, \"app-post\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(34, \"img\", 14);\n        i0.ɵɵelement(35, \"div\", 15);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"icon\", ctx.personBooth);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.accountNavigationString, \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"icon\", ctx.hamburgerIcon);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(16, _c0, ctx.isMenuOpen));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(18, _c1, ctx.currentTag == \"general\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(20, _c1, ctx.currentTag == \"politics\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(22, _c1, ctx.currentTag == \"hobbies\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(24, _c1, ctx.currentTag == \"philosphy\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(26, _c1, ctx.currentTag == \"personal\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(28, _c1, ctx.currentTag == \"current_events\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(30, _c1, ctx.currentTag == \"\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"visible\", ctx.addPostDialogVisible);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentTag === \"general\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.username != \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.posts);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"src\", ctx.backgroundImageUri, i0.ɵɵsanitizeUrl);\n      }\n    },\n    directives: [i4.FaIconComponent, i5.NgClass, i6.AddPostFormComponent, i5.NgIf, i7.PostsCarouselComponent, i8.PageControlsComponent, i5.NgForOf, i9.PostComponent],\n    styles: [\".container[_ngcontent-%COMP%]{width:100vw;padding-top:0;display:flex;flex-direction:column;justify-content:center}.post-list[_ngcontent-%COMP%]{margin-top:15px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:100vw}.bottom[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-evenly;flex-wrap:wrap}.dialogOpenButton[_ngcontent-%COMP%]{width:250px;align-self:center;margin:16px;background-color:#b30000;border-color:#b30000;border-radius:5px;padding:8px;animation:impuls-glowing-animation 1.2s ease-in-out .7s infinite}.dialogOpenButton[_ngcontent-%COMP%]:hover{cursor:pointer}header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.47);width:100vw;padding-top:5px;padding-bottom:15px;margin-bottom:8px;background-color:#262626;display:flex;flex-direction:column;align-items:center}.menu[_ngcontent-%COMP%]{height:30px;padding:5px 5px 0;border-bottom:5px solid rgba(255,255,255,.47);justify-items:center;transition:ease-in .3s;cursor:pointer;font-size:medium}.menu-selected[_ngcontent-%COMP%]{color:#b30000;border-color:#b30000}.menu[_ngcontent-%COMP%]:hover{color:red;border-color:red}.upper[_ngcontent-%COMP%]{display:flex;width:90%;height:50px;justify-content:space-between;padding:10px 0 10px 10px;margin-bottom:20px}.logo-img[_ngcontent-%COMP%]{width:50px;margin-right:8px}.logo-div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}h1[_ngcontent-%COMP%]{color:#b30000;font-size:x-large}.account-button[_ngcontent-%COMP%]{color:#ffffff78;background-color:#262626;border:none}.background-image[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-5;transition:.5s ease-in-out;object-fit:cover;filter:blur(5px);-webkit-backdrop-filter:blur(5px)}.background-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;background-color:#26262691}.account-button[_ngcontent-%COMP%]:hover{color:#fff;cursor:pointer}.nav-toggle[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 768px){.bottom[_ngcontent-%COMP%]{flex-direction:column}.menu-bar[_ngcontent-%COMP%]{display:none}.show[_ngcontent-%COMP%]{display:flex}.nav-toggle[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;align-content:center;padding-bottom:8px;font-size:small}.menu[_ngcontent-%COMP%]{border-bottom:1px solid white;width:100%;align-items:center;justify-content:center}h1[_ngcontent-%COMP%]{font-size:small}.logo-img[_ngcontent-%COMP%]{width:25px}.account-button[_ngcontent-%COMP%]{font-size:x-small}header[_ngcontent-%COMP%]{border:none}}@keyframes impuls-glowing-animation{0%{box-shadow:0 0 1px #b30000}25%{box-shadow:0 0 3px #b30000}35%{box-shadow:0 0 15px #b30000}50%{box-shadow:0 0 25px #b30000}75%{box-shadow:0 0 10px #b30000}to{box-shadow:none}}\"]\n  });\n  return MainPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}